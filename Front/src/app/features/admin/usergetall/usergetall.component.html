<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
<hr>
<div class="container bootstrap snippets bootdey">
    <div class="row">
      <div class="col-lg-12 offset-lg-2"> 
            <div class="main-box no-header clearfix">
                <div class="main-box-body clearfix">
                    <div class="table-responsive">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <input type="text" [(ngModel)]="searchText" placeholder="Search by name, email, or phone number" class="form-control">
                            </div>
                            <div class="col-md-6">
                                <select [(ngModel)]="selectedRole" (change)="filterUsers()" class="form-select">
                                    <option value="">Select Role</option>
                                    <option value="ADMIN">Admin</option>
                                    <option value="USER">User</option>
                                    <option value="COACH">Coach</option>
                                    <option value="MENTOR">Mentor</option>
                                    <option value="NUTRITIONISTE">Nutritioniste</option>
                                </select>
                            </div>
                        </div>
                        <table class="table user-list">
                            <thead>
                                <tr>
                                  <th><span>#</span></th>
                                  <th><span>Image</span></th>
                                  <th><span>User</span></th>
                                  <th><span>Email</span></th>
                                  <th class="text-center"><span>Phone Number</span></th>
                                  <th><span>Roles</span></th>
                                  <th>&nbsp;</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let user of filterUsers(); let i = index">
                                  <td>                                     
                                        <p class="text-sm font-weight-bold mb-0">{{ i + 1 }}</p>                                     
                                  </td>
                                                                
                                    <td>                                     
                                      <img src="{{ user.imageStr }}">                                  
                                  </td>                                  
                              
                             
                                  <td>                           
                                        <a href="#" class="user-link">{{ user.firstName }} {{ user.lastName }}</a>                                      
                                  </td>
                                  <td>
                                    <a href="#">{{ user.email }}</a>
                                  </td>
                                  
                                  <td class="text-center">
                                    <span class="label label-default">{{ user.phonenumber }}</span>
                                  </td>
                                  <td>
                                    <div *ngIf="isAdmin(user)">
                                      <select [(ngModel)]="user.role" class="form-select">
                                        <option value="USER">User</option>
                                        <option value="ADMIN">Admin</option>
                                        <option value="COACH">Coach</option>
                                        <option value="MENTOR">Mentor</option>
                                        <option value="NUTRITIONISTE">Nutritioniste</option>
                                      </select>
                                    </div>
                                  </td>                                   
                                  <td style="width: 20%;">
                                    <a  class="table-link text-info" (click)="updateRole(user)">
                                        <span class="fa-stack">
                                            <i class="fa fa-square fa-stack-2x"></i>
                                            <i class="fa fa-pencil fa-stack-1x fa-inverse"></i>
                                        </span>
                                    </a>
                                    <a  class="table-link danger" (click)="delete(user.id)">
                                        <span class="fa-stack">
                                            <i class="fa fa-square fa-stack-2x"></i>
                                            <i class="fa fa-trash-o fa-stack-1x fa-inverse"></i>
                                        </span>
                                    </a>
                                  </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>  